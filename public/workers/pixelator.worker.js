!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=function(){function t(t,e,i){this.pixelWidth=e,this.pixelHeight=i,this.imgWidth=t.width,this.imgHeight=t.height,this.originalPixelBytes=t.data,this.pixelatedPixelBytes=new Uint8ClampedArray(this.originalPixelBytes.length),this.isUsed=!1}return t.prototype.pixelate=function(){this.assertUnused(),this.isUsed=!0;for(var t=this.getAllSections(),e=t.length;e--;){var i=t[e],r=this.getAverageColor(i);this.drawRect(i,r)}return{width:this.imgWidth,height:this.imgHeight,data:this.pixelatedPixelBytes}},t.prototype.assertUnused=function(){if(this.isUsed)throw new TypeError("Pixelator has already been used.")},t.prototype.getAllSections=function(){for(var t=this.pixelWidth,e=this.pixelHeight,i=[],r=0;r<this.imgHeight;){for(var n=Math.min(this.imgHeight-r,e),a=0;a<this.imgWidth;){var h=Math.min(this.imgWidth-a,t);i.push({x:a,y:r,width:h,height:n}),a+=h}r+=n}return i},t.prototype.getAverageColor=function(t){for(var e=this.originalBytesAt(t),i={r:0,g:0,b:0,a:0},r=e.length,n=r/4,a=0;a<r;)i.r+=e[a++],i.g+=e[a++],i.b+=e[a++],i.a+=e[a++];return{r:i.r/n&255,g:i.g/n&255,b:i.b/n&255,a:i.a/n&255}},t.prototype.originalBytesAt=function(t){for(var e=new Uint8ClampedArray(t.width*t.height*4),i=t.x,r=t.x+t.width,n=t.y,a=t.y+t.height,h=n;h<a;h++){var o=h-n,s=this.originalPixelBytes.slice(4*(h*this.imgWidth+i),4*(h*this.imgWidth+r));e.set(s,o*t.width*4)}return e},t.prototype.drawRect=function(t,e){for(var i=t.x,r=t.x+t.width,n=t.y,a=t.y+t.height,h=n;h<a;h++)for(var o=i;o<r;o++){var s=e.r,d=e.g,l=e.b,g=e.a,u=4*(h*this.imgWidth+o);this.pixelatedPixelBytes.set([s,d,l,g],u)}},t}(),n=self;n.addEventListener("message",function(t){var e,i,a,h=t.data;switch(h.type){case"pixelate":try{var o={data:new Uint8ClampedArray(h.imgBuffer),width:h.imgWidth,height:h.imgHeight},s=(e=o,i=h.pixelWidth,a=h.pixelHeight,new r(e,i,a).pixelate());n.postMessage({type:"succeeded",imgWidth:s.width,imgHeight:s.height,imgBuffer:s.data.buffer},[s.data.buffer])}catch(t){n.postMessage({type:"failed",error:t})}default:throw new TypeError("Unexpected message type: "+t.data.type)}})}]);